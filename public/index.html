
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini TinyPNG ‚Äì Compresor</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="site-header">
    <h1>Mini TinyPNG</h1>
    <p class="sub">Arrastr√° y solt√° tus im√°genes o us√° el bot√≥n para cargarlas.</p>
  </header>

  <main>
    <section class="controls">
      <label>Formato</label>
      <select id="format">
        <option value="webp">WebP (recomendado)</option>
        <option value="jpg">JPG</option>
        <option value="png">PNG</option>
        <option value="avif">AVIF</option>
      </select>
      <label>Calidad</label>
      <input type="range" id="quality" min="1" max="100" value="78" />
      <span id="qualityVal">78</span>

      <label class="profileRef">
        Perfil de color (opcional, imagen de referencia ICC)
        <input type="file" id="profileRef" accept="image/*" />
      </label>
    </section>

    <section id="dropzone" class="dropzone">
      <div class="dz-inner">
        <div class="bear">üêº</div>
        <p>Solt√° tus im√°genes aqu√≠</p>
        <span>o</span>
        <button id="pickBtn" class="btn">Elegir im√°genes</button>
        <input id="fileInput" type="file" accept="image/*" multiple hidden />
      </div>
    </section>

    <section id="queue" class="queue hidden">
      <h2>Cola de compresi√≥n</h2>
      <ul id="items"></ul>

      <div class="footer-actions">
        <a id="zipAll" class="btn secondary hidden zipAll" href="#">Descargar todo (ZIP)</a>
        <button id="resetBtn" class="btn link">Limpiar</button>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <small>Procesa localmente v√≠a tu servidor Node (Sharp). No sube nada a terceros.</small>
  </footer>

  <!-- Modal de error -->
  <div id="errorModal" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">‚ö†Ô∏è Error al procesar la imagen</h3>
      <p class="friendly"></p>
      <details>
        <summary>Ver detalles t√©cnicos</summary>
        <pre class="technical"></pre>
      </details>
      <button id="closeModal" class="btn">Cerrar</button>
    </div>
  </div>

  <script src="./app.js" type="module"></script>

  <!-- Modal de comparaci√≥n antes/despu√©s -->
  <div id="compareModal" class="modal-overlay hidden">
    <div class="modal-box compare">
      <h3>üì∏ Comparar antes / despu√©s</h3>
      <div class="compare-container">
        <div class="compare-img before">
          <img id="compareBefore" alt="Antes" />
        </div>
        <div class="compare-img after">
          <img id="compareAfter" alt="Despu√©s" />
        </div>
        <div class="compare-slider" id="compareSlider"></div>
      </div>
      <div class="zoom-control">
          <label for="zoomRange">üîç Zoom</label>
          <input type="range" id="zoomRange" min="1" max="3" value="1" step="0.05">
        </div>
        <div class="pan-controls hidden">
  <input type="range" id="panX" min="-100" max="100" value="0" step="1">
  <input type="range" id="panY" min="-100" max="100" value="0" step="1" orient="vertical">
</div>
<button id="closeCompare" class="btn">Cerrar</button>
    </div>
  </div>
</body>
</html>
